# Method probe Agent Configuration

# ==================== Flat Mode (单方法计时) ====================

# Enable/disable Flat mode (default: true)
probe.flat.enabled=true

# Packages to instrument - monitor all methods in all classes under these packages
# Example: probe.flat.packages=com.example.service,com.example.dao
probe.flat.packages=

# Classes to instrument - monitor all methods in these specific classes
# Example: probe.flat.classes=com.example.Controller,com.example.Job
probe.flat.classes=

# Methods to instrument - only monitor these specific methods (format: className.methodName)
# Example: probe.flat.methods=com.example.Service.doProcess,com.example.Dao.query
probe.flat.methods=

# Flat threshold in milliseconds - only log methods that exceed this time (default: 0)
probe.flat.threshold=0

# Flat trigger mode: when to trigger logging (default: timeout)
# - timeout: only log when exceeding threshold
# - exception: only log when method throws exception
# - timeout,exception or both: log on either condition
probe.flat.trigger=timeout

# ==================== Tree Mode (调用树) ====================

# Enable/disable Tree mode (default: true)
probe.tree.enabled=true

# Entry methods for tree probe - when called, a new call tree is started
# Format: className.methodName (comma-separated)
# Example: probe.tree.entry.methods=com.example.Controller.handleRequest
probe.tree.entry.methods=

# Packages to include in tree - child methods only tracked if in these packages
# Example: probe.tree.packages=com.example
probe.tree.packages=

# Tree threshold in milliseconds - only print tree if total time exceeds this (default: 0)
probe.tree.threshold=0

# Tree trigger mode: when to trigger tree printing (default: timeout)
# - timeout: only print when exceeding threshold
# - exception: only print when entry method throws exception
# - timeout,exception or both: print on either condition
probe.tree.trigger=timeout

# ==================== General Configuration ====================

# HTTP server port for dynamic configuration (default: 9876)
probe.http.port=9876

# Patterns to exclude (supports * wildcard at start or end)
# probe.exclude=*Test,*Mock

# ==================== Log Output Configuration ====================

# Output mode: console or file (default: console)
# - console: output to System.out
# - file: async output to log files with date rolling
probe.output.mode=console

# Log output directory (only used when mode=file)
probe.output.dir=./probe-logs

# Async buffer size - max pending log messages (default: 10000)
probe.output.buffer.size=10000

# Flush interval in milliseconds (default: 1000)
probe.output.flush.interval=1000

# ==================== Snapshot Configuration ====================

# Enable method argument snapshot capture (default: false)
probe.snapshot.enabled=false

# Snapshot storage directory
probe.snapshot.dir=./probe-snapshots

# Snapshot threshold in milliseconds - only capture when exceeding this (default: 500)
probe.snapshot.threshold=500

# Maximum object size for serialization in bytes (default: 1MB)
probe.snapshot.max.object.size=1048576

# Retention days for snapshot files (default: 7)
probe.snapshot.retention.days=7

# Serialize mode: sync (default, data consistent) or async (low overhead, may be inconsistent)
probe.snapshot.serialize.mode=sync

# Tree mode snapshot probe: entry_only (default) or all (capture all method args)
probe.tree.snapshot.probe=entry_only

# Snapshot trigger mode: when to capture snapshot (default: timeout)
# - timeout: capture when exceeding threshold
# - exception: capture when method throws exception
# - timeout,exception or both: capture on either condition
probe.snapshot.trigger=timeout

# ==================== Exception Filter Configuration ====================
# NOTE: These settings only take effect when exception triggering is enabled,
#       i.e., when probe.flat.trigger, probe.tree.trigger, or probe.snapshot.trigger
#       contains "exception" or "both".

# Exception types to include (comma-separated, empty = include all)
# Supports simple class names or fully qualified names
# Example: probe.exception.include=RuntimeException,SQLException
probe.exception.include=

# Exception types to exclude (comma-separated, takes priority over include)
# Example: probe.exception.exclude=CancellationException,IgnoredException
probe.exception.exclude=

# Maximum stack trace depth to capture (default: 10)
# Lower values improve performance, higher values provide more context
probe.exception.stack.depth=10
